
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>optbayesexpt.obe module &#8212; OptBayesExpt 0.1.7 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="optbayesexpt.obe_server module" href="optbayesexpt.obe_server.html" />
    <link rel="prev" title="optbayesexpt.exptmodel module" href="optbayesexpt.exptmodel.html" />

    <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>

<script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>
<script>
$(document).ready(function(){
  // Mark external (non-nist.gov) A tags with class "external"
  //If the adress start with https and ends with nist.gov
  var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)');
  //Regex to find address that start with https
  var re_absolute_address = new RegExp('^((https?:)?\/\/)');
  $("a").each(function(){
    var url=$(this).attr('href');
    if(re_nist.test(url) || !re_absolute_address.test(url)){
      $(this).addClass('local');
    }else{
      //This a href appears to be external, so tag it
      $(this).addClass('external');
    }
  });
  // Add leaveNotice to external A elements
  $('a.external').leaveNotice();
});
</script>
<link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="optbayesexpt.obe_server.html" title="optbayesexpt.obe_server module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="optbayesexpt.exptmodel.html" title="optbayesexpt.exptmodel module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OptBayesExpt 0.1.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="optbayesexpt.html" accesskey="U">optbayesexpt API</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-optbayesexpt.obe">
<span id="optbayesexpt-obe-module"></span><h1>optbayesexpt.obe module<a class="headerlink" href="#module-optbayesexpt.obe" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="optbayesexpt.obe.OptBayesExpt">
<em class="property">class </em><code class="sig-prename descclassname">optbayesexpt.obe.</code><code class="sig-name descname">OptBayesExpt</code><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="optbayesexpt.exptmodel.html#optbayesexpt.exptmodel.ExptModel" title="optbayesexpt.exptmodel.ExptModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">optbayesexpt.exptmodel.ExptModel</span></code></a>, <a class="reference internal" href="optbayesexpt.probdistfunc.html#optbayesexpt.probdistfunc.ProbDistFunc" title="optbayesexpt.probdistfunc.ProbDistFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">optbayesexpt.probdistfunc.ProbDistFunc</span></code></a></p>
<p>An implementation of Optimal Bayesian Experimental Design</p>
<p>OptBayesExpt provides an efficient alternative to the traditional measure-then-fit approach
to measurement.  Instead of fitting parameters of a model function to a existing data,
optimal Bayesian experimental design incorporates the model into the measurement process,
using it to determine an informed measurement strategy during the measurement process.</p>
<p>The method calculates a <em>utility function</em> of measurement settings, which is qualitatively a
measure of the predicted improvement to the parameter distribution.  See the manual for more
detail.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">ExptModel.model_function()</span></code> method must be redefined to incorporate a model
that’s relevant to the application.</p>
</div>
<dl class="attribute">
<dt id="optbayesexpt.obe.OptBayesExpt.sets">
<code class="sig-name descname">sets</code><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Each array in the <code class="code docutils literal notranslate"><span class="pre">sets</span></code> tuple contains the
possible discrete values of a measurement setting.  Applied voltage, excitation frequency,
and a knob that goes to eleven are all examples of settings.  For computational
speed, it is important to keep setting arrays as few and small as practical.
Settings arrays that cover unused setting values, or that use overly fine
disretization will slow the calculations.  Settings that are held constant belong in
the <code class="code docutils literal notranslate"><span class="pre">cons</span></code> array.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="optbayesexpt.obe.OptBayesExpt.pars">
<code class="sig-name descname">pars</code><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Each array in the <code class="code docutils literal notranslate"><span class="pre">pars</span></code> tuple contains the
possible values of a model parameter.  In a simple example model, <code class="code docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">m</span> <span class="pre">*</span> <span class="pre">x</span> <span class="pre">+</span>
<span class="pre">b</span></code>, the parameters are <code class="code docutils literal notranslate"><span class="pre">m</span></code> and <code class="code docutils literal notranslate"><span class="pre">b</span></code>.  As with the <code class="code docutils literal notranslate"><span class="pre">sets</span></code>,
<code class="code docutils literal notranslate"><span class="pre">pars</span></code> arrays should be kept few and small.  Parameters that can be assumed
constant belong in the <code class="code docutils literal notranslate"><span class="pre">cons</span></code> array.  Discretization should only be fine enough
to support the needed measurement precision.  The parameter ranges must also be
limited: too broad, and the computation will be slow; too narrow, and the measurement
may have to be adjusted and repeated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="optbayesexpt.obe.OptBayesExpt.cons">
<code class="sig-name descname">cons</code><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.cons" title="Permalink to this definition">¶</a></dt>
<dd><p>Model constants.  Examples include experimental
settings that are rarely changed, and model parameters that are well-known from previous
measurement results.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.besty">
<code class="sig-name descname">besty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.besty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.besty" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the model function at the maximum-probability parameters</p>
<p>Similar in spirit to the “best-fit curve”, the <code class="code docutils literal notranslate"><span class="pre">model_function</span></code> is evaluated over
all settings value using the maximum-probability parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An array of <code class="code docutils literal notranslate"><span class="pre">model_function</span></code> outputs with dimensions
of <code class="code docutils literal notranslate"><span class="pre">ExptModel.allsettings</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.calc_exp_utility">
<code class="sig-name descname">calc_exp_utility</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.calc_exp_utility"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.calc_exp_utility" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the exponential of utility as a function of settings</p>
<p>Used in selecting measurement settings. For each setting combination, calculate the
standard deviation of model outputs produced
by modeling a set of random draws from the parameter distribution.  Loosely, the spread
in model outputs given the distribution of parameters.  In the theory, the <em>utility</em> is
the change in the information entropy of the distribution, which involves a <code class="code docutils literal notranslate"><span class="pre">log(</span>
<span class="pre">)</span></code>.  This function skips the <code class="code docutils literal notranslate"><span class="pre">log()</span></code>, and calculates <code class="code docutils literal notranslate"><span class="pre">exp</span></code> (<em>utility</em>).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>exp_utility as an <code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code> with dimensions of <code class="code docutils literal notranslate"><span class="pre">allsettings</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.config">
<code class="sig-name descname">config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the experimental model and the parameter pdf.</p>
<p>This method should be called before either pdf_update or opt_setting</p>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.good_setting">
<code class="sig-name descname">good_setting</code><span class="sig-paren">(</span><em class="sig-param">pickiness=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.good_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.good_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a setting with a good probability of refining the pdf</p>
<p>In comparison to the opt_setting method, where the measurements concentrate on the
settings,
leaving much of setting space untouched.   How do you know you’re not missing something
in that region?  By allowing some randomness in the setting selection, we allow
non-optimum settings, covering setting space lightly while still emphasizing the
settings that improve our parameter estimates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pickiness</strong> (<em>float</em>) – A setting selection tuning parameter.  Pickiness=0 produces random
settingss.  With pickiness values greater than about 10 the behavior is similar to
<code class="code docutils literal notranslate"><span class="pre">opt_setting()</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of settings for the next measurement</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.opt_setting">
<code class="sig-name descname">opt_setting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.opt_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.opt_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a setting with the best probability of refining the pdf</p>
<p>At what settings are we most uncertain about how an experiment will come out? That is
where the next measurement will do the most good. So, we calculate model outputs
for a bunch of possible model parameters and see wherethe output varies the most.
We use our accumulated knowledge by drawing the possible parameters from the current
parameter pdf.</p>
<p>Returns:  A tuple of settings.</p>
</dd></dl>

<dl class="method">
<dt id="optbayesexpt.obe.OptBayesExpt.pdf_update">
<code class="sig-name descname">pdf_update</code><span class="sig-paren">(</span><em class="sig-param">onesetting</em>, <em class="sig-param">ymeas</em>, <em class="sig-param">sigma=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/optbayesexpt/obe.html#OptBayesExpt.pdf_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#optbayesexpt.obe.OptBayesExpt.pdf_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Refines the parameters’ probability distribution function given a measurement result.</p>
<p>An implementation of Bayesian inference, uses the model to calculate the likelihood of
obtaining the measurement result <code class="code docutils literal notranslate"><span class="pre">ymeas</span></code> as a function of parameter values,
and uses that likelihood to generate a refined <em>posterior</em> (after-measurement) distribution
from the <em>prior</em> (pre-measurement) distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>onesetting</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The measurement settings.</p></li>
<li><p><strong>ymeas</strong> – (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>): The measurement mean value.</p></li>
<li><p><strong>sigma</strong> – (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>): The uncertainty of the measurement expressed as a standard</p></li>
<li><p><strong>deviation.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="optbayesexpt.exptmodel.html"
                        title="previous chapter">optbayesexpt.exptmodel module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="optbayesexpt.obe_server.html"
                        title="next chapter">optbayesexpt.obe_server module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/optbayesexpt.obe.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="optbayesexpt.obe_server.html" title="optbayesexpt.obe_server module"
             >next</a> |</li>
        <li class="right" >
          <a href="optbayesexpt.exptmodel.html" title="optbayesexpt.exptmodel module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OptBayesExpt 0.1.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="optbayesexpt.html" >optbayesexpt API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019 Bob McMichael.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>